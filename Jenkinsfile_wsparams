node('centos7-linux') {
   //def gitBranch
   ws('/home/jenkins/temp/') {
       sh "echo allocate ws"
       git 'https://github.com/priteshkumar/linuxac-bash.git'
      // Get the Maven tool.
      // ** NOTE: This 'M3' Maven tool must be configured
      // **       in the global configuration.
      echo "${JOB_NAME}"
      echo "${BUILD_TAG}"
      echo "${params.branch}"
      def gitBranch = params.branch
      echo "${gitBranch}"
      stage('Build') {
      // Run the maven build
        if (isUnix()) {
            //sh "echo $BRANCH_NAME"
            //echo "$gitBranch"""
            sh "git checkout -b ${gitBranch} origin/dev"
            //copyArtifacts filter: 'test', fingerprintArtifacts: true, projectName: '../updptriggers/repogit'
            sh "./arrays.sh"
            sh "mkdir -p target"
            sh "cp *.sh ./target/"
         }
   }
   stage('Results') {
      sh "tar -czf ./artifacts.tar.gz ./target/*"
      archiveArtifacts "*.gz"
      fingerprint 'artifacts.tar.gz'
      echo "${currentBuild.number}"
      echo "${currentBuild.displayName}"
      echo "${currentBuild.fullProjectName}"
   }
   stage('Cleanup'){
       cleanWs()
   }
  }
   
}
